conky.config = {
    use_xft = true,
    font = 'DejaVu Sans:size=12',
    xftalpha = 0.8,
    update_interval = 1,
    total_run_times = 0,

    -- Оконные настройки
    own_window = true,
    own_window_type = 'desktop',
    own_window_class = 'Conky',
    own_window_transparent = false,
    own_window_argb_visual = true,
    own_window_argb_value = 0,
    own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',
    own_window_colour = '#000000',

    -- Производительность
    double_buffer = true,
    no_buffers = false,
    text_buffer_size = 2048,

    -- Размеры и позиционирование
    minimum_width = 420,
    maximum_width = 420,
    alignment = 'top_right',
    gap_x = 40,
    gap_y = 30,

    -- Цветовая схема
    draw_shades = false,
    draw_outline = false,
    draw_borders = false,
    default_color = '#E1E1E6',
    color0 = '#FF5E13',      -- оранжево-красный (часы)
    color1 = '#BABABA',      -- серый (ключи)
    color2 = '#FFFFFF',      -- белый (значения)
    color3 = '#FF8C00',      -- акцент / проценты
    color4 = '#69a9ff',      -- голубой для дисков и RAM

    -- Сглаживание
    override_utf8_locale = true,

    -- Сэмплы для сглаживания значений
    net_avg_samples = 2,
    cpu_avg_samples = 2,
};

conky.text = [[
# Часы
${alignc}${font DejaVu Sans:size=44}${color0}${time %H:%M}${font}
${alignc}${font DejaVu Sans:size=15}${color0}${time %A, %d %B %Y}${font}${color}
# Мониторинг железа
${color1}Host:   ${color2}${nodename}
${color1}Uptime: ${color2}${uptime}
${color1}Kernel: ${color2}${kernel}
${color1}CPU:    ${color2}${cpu cpu0}% ${color3}[${hwmon 2 temp 1}°C]
${color1}RAM:    ${color2}${mem} / ${memmax} ${color3}[${memperc}%]
${color1}WiFi:   ${color2}${wireless_essid wlan0} ${color3}[${wireless_link_qual_perc wlan0}%]
${color1}IP: ${color2}${execi 60 curl -s --max-time 15 ifconfig.me}
# Использование дисков
${hr 1}
${color1}Диски свободно/всего:
${color1}/root:  ${color4}${fs_free /} / ${fs_size /} (${fs_free_perc /}%) - ${fs_type /}
${color1}/home:  ${color4}${fs_free /home/als} / ${fs_size /home/als} (${fs_free_perc /home/als}%) - ${fs_type /home/als}
${color1}/Data:  ${color4}${fs_free /run/media/als/Data} / ${fs_size /run/media/als/Data} (${fs_free_perc /run/media/als/Data}%) - ${fs_type /run/media/als/Data}
${color1}/Work:  ${color4}${fs_free /run/media/als/Work} / ${fs_size /run/media/als/Work} (${fs_free_perc /run/media/als/Work}%) - ${fs_type /run/media/als/Work}
# Погода
${hr 1}
${color3}Погода: ${color2}Омск  \
${execi 600 curl -s --max-time 15 'https://wttr.in/Omsk?format=%t' | grep -oE '[-+][0-9]+°C|[0-9]+°C'}
# Курсы валют
${color3}USD: ${color2}${execi 300 curl -s --max-time 15 "https://www.cbr-xml-daily.ru/daily_json.js" | jq -r '.Valute.USD.Value' | xargs printf "%.2f"}₽ \
${color3}EUR: ${color2}${execi 300 curl -s --max-time 15 "https://www.cbr-xml-daily.ru/daily_json.js" | jq -r '.Valute.EUR.Value' | xargs printf "%.2f"}₽
# Процессы
${hr 1}
${color1}Топ 5 процессов (CPU и MEM):
${color1}${goto 10}Имя${goto 190}PID${goto 230}CPU%${goto 290}MEM%
${color2}${goto 10}${top name 1}${goto 170}${top pid 1}${goto 230}${top cpu 1}${goto 290}${top mem 1}
${color2}${goto 10}${top name 2}${goto 170}${top pid 2}${goto 230}${top cpu 2}${goto 290}${top mem 2}
${color2}${goto 10}${top name 3}${goto 170}${top pid 3}${goto 230}${top cpu 3}${goto 290}${top mem 3}
${color2}${goto 10}${top name 4}${goto 170}${top pid 4}${goto 230}${top cpu 4}${goto 290}${top mem 4}
${color2}${goto 10}${top name 5}${goto 170}${top pid 5}${goto 230}${top cpu 5}${goto 290}${top mem 5}
${hr 1}
# Новости
${execi 600 curl -s --max-time 15 https://www.opennet.ru/opennews/opennews_all_utf.rss | grep -oP '(?<=<title>).*?(?=</title>)' | awk 'length($0)<=42' | sed 1,2d | head -5}
${execi 600 curl -s --max-time 15 https://www.cnews.ru/inc/rss/news.xml | grep -oP '(?<=<title>).*?(?=</title>)' | awk 'length($0)<=42' | sed 1,2d | head -5}
${execi 600 curl -s --max-time 15 https://naked-science.ru/feed | grep -oP '(?<=<title>).*?(?=</title>)' | awk 'length($0)<=42' | sed 1,2d | head -5}
]]
